'use strict';document.addEventListener("DOMContentLoaded",function(){function h(a){a=a.replace(/\r\n|\r/g,"\n").replace(/[^\x09\x0A\x0D\x20-\x7E\u4E00-\u9FFF]/g,"").trim();a.length>256E3&&(alert("\u8f38\u5165\u5167\u5bb9\u904e\u9577\u8acb\u5206\u6bb5\u58d3\u7e2e\u6216\u7e2e\u6e1b\u5167\u5bb9\nInput is too long, please compress in smaller parts."),a="");return a}function g(){c.textContent="";c.removeAttribute("data-raw");k.textContent="";l.style.display="none"}const d=document.querySelector(".code-input-area"),
    b=document.getElementById("start-compress"),l=document.querySelector(".compress-result-area"),c=document.querySelector(".compressed-output"),k=document.querySelector(".stats-display"),m=document.querySelector(".copy-button");let e="";d.addEventListener("input",function(){var a=d.textContent.trim();e=a=h(a);b.disabled=!a;g()});d.addEventListener("paste",function(a){a.preventDefault();a=(a.clipboardData||window.clipboardData).getData("text");a=h(a);e=d.textContent=a;b.disabled=!a;g()});b.addEventListener("click",
    async function(){b.disabled=!0;if(e)try{const a=await (await fetch("/cj_api/css_js_minifier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:e})})).json();a.type==="CSS"||a.type==="JS"?(c.textContent=a.result||"",c.setAttribute("data-raw",a.result||""),k.textContent=a.status||"",l.style.display="flex"):(alert("\u8f38\u5165\u5167\u5bb9\u4e0d\u7b26\u5408 CSS \u6216 JavaScript \u898f\u7bc4\nInput is not valid CSS or JavaScript."),e=d.textContent="",b.disabled=!0,
        g())}catch(a){alert("\u58d3\u7e2e\u5931\u6557\u8acb\u7a0d\u5f8c\u518d\u8a66\nCompression failed, please try again later."),console.error(a)}});m.addEventListener("click",function(){const a=c.getAttribute("data-raw");a&&navigator.clipboard.writeText(a).then(()=>{const f=document.createElement("div");f.textContent="\u5df2\u8907\u88fd\u7d50\u679c - Result Copied.";f.style.cssText="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: #00FF00; color: #000000; padding: 8px 16px; border: 2px solid #227700; border-radius: 5px; font-size: 14px; z-index: 9999;";
    document.body.appendChild(f);setTimeout(()=>f.remove(),2E3)})});b.disabled=!0});