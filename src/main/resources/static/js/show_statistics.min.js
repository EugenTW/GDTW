'use strict';document.addEventListener("DOMContentLoaded",function(){function d(a){const b=Array(365).fill(null),g=365-a.length;a.forEach((h,f)=>{b[g+f]=h});return b}function c(a,b,g,h){a=document.getElementById(a);a.style.backgroundColor="rgb(29, 2, 29)";a.style.borderRadius="5px";a.style.border="3px solid #7a0a64";a.height=350;a=a.getContext("2d");var f=Math.max(...g.filter(e=>e!==null),10);f=Math.max(f+100,100);new Chart(a,{type:"line",data:{labels:Array(365).fill(""),datasets:[{label:b,data:g,
            borderColor:h,borderWidth:1,pointBackgroundColor:h,pointRadius:2,pointHoverRadius:3,fill:!1,tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:b,font:{size:16,weight:"bold"},color:"white"},legend:{display:!1},tooltip:{callbacks:{title:e=>`Past Day: ${365-e[0].dataIndex}`}}},scales:{x:{display:!0,grid:{drawBorder:!0,drawTicks:!1,drawOnChartArea:!1},border:{color:"white"},title:{display:!0,text:"Time (days)",font:{size:14,weight:"bold"},color:"white"},ticks:{display:!1}},y:{display:!0,
                grid:{drawBorder:!0,drawTicks:!1,drawOnChartArea:!1},border:{color:"white"},beginAtZero:!0,suggestedMax:f,ticks:{beginAtZero:!0,maxTicksLimit:13,callback:function(e){return Number.isInteger(e)?e:""},font:{size:12,weight:"bold"},color:"white"},title:{display:!0,text:"Counts",font:{size:14,weight:"bold"},color:"white"}}}}})}fetch("/ds_api/total_service_statistics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(a=>{if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);
    return a.json()}).then(a=>{document.getElementById("total-web-service").textContent=a.totalWebServiceCount||0;document.getElementById("total-short-urls-created").textContent=a.totalShortUrlsCreated||0;document.getElementById("total-short-urls-used").textContent=a.totalShortUrlsUsed||0;document.getElementById("total-image-albums-created").textContent=a.totalImageAlbumsCreated||0;document.getElementById("total-image-albums-visited").textContent=a.totalImageAlbumsVisited||0;document.getElementById("total-images-created").textContent=
    a.totalImagesCreated||0;document.getElementById("total-images-visited").textContent=a.totalImagesVisited||0;document.getElementById("total-css-js-minified").textContent=a.totalCssJsMinified||0}).catch(a=>{console.error("Error fetching total statistics:",a)});fetch("/ds_api/recent_statistics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(a=>{if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{var b=a.data;a=b.created||Array(365).fill(0);
    b=b.used||Array(365).fill(0);c("created-short-url-chart","\u77ed\u7db2\u5740\u5efa\u7acb - Short URL Creation",d(a.url),"rgb(48,255,48)");c("created-album-chart","\u5716\u7247\u76f8\u7c3f\u5efa\u7acb - Image Album Creation",d(a.album),"rgb(24,255,255)");c("created-image-chart","\u5716\u7247\u5efa\u7acb - Image Creation",d(a.image),"rgb(255,204,0)");c("used-short-url-chart","\u77ed\u7db2\u5740\u4f7f\u7528 - Short URL Usage",d(b.url),"rgba(48,255,48)");c("used-album-chart","\u5716\u7247\u76f8\u7c3f\u700f\u89bd - Photo Album Browsing",
        d(b.album),"rgba(24,255,255)");c("used-image-chart","\u5716\u7247\u700f\u89bd - Image Browsing",d(b.image),"rgba(255,204,0)")}).catch(a=>{console.error("Error fetching recent statistics:",a);a=Array(365).fill(0);c("created-short-url-chart","\u77ed\u7db2\u5740\u5efa\u7acb - Short URL Creation",a.url,"rgba(75, 192, 75, 1)");c("created-album-chart","\u5716\u7247\u76f8\u7c3f\u5efa\u7acb - Image Album Creation",a.album,"rgba(54, 162, 235, 1)");c("created-image-chart","\u5716\u7247\u5efa\u7acb - Image Creation",
    a.image,"rgba(255, 206, 86, 1)");c("used-short-url-chart","\u77ed\u7db2\u5740\u4f7f\u7528 - Short URL Usage",a.url,"rgba(75, 192, 75, 1)");c("used-album-chart","\u5716\u7247\u76f8\u7c3f\u700f\u89bd - Image Album Browsing",a.album,"rgba(54, 162, 235, 1)");c("used-image-chart","\u5716\u7247\u700f\u89bd - Image Browsing",a.image,"rgba(255, 206, 86, 1)")})});